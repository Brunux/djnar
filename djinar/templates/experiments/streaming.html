{% load static %}
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebRTC demo</title>
    <style>
        .option {
            margin-top: 10px;
        }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-light bg-dark">
        <div class="form-inline">
            <h1 class="text-white">Live Streaming...</h1>
            <button id="start" type="button" class="btn btn-success" onclick="start()">Start</button>
            <button id="stop" type="button" style="display: none" class="btn btn-danger" onclick="stop()">Stop</button>
        </div>
    </nav>
    <br>
    <div class="container">
        <h3>Options</h3>
        <div class="option">
            <input id="use-datachannel" checked="checked" type="checkbox"/>
            <label for="use-datachannel">Use datachannel</label>
            <select id="datachannel-parameters">
                <option value='{"ordered": true}'>Ordered, reliable</option>
                <option value='{"ordered": false, "maxRetransmits": 0}'>Unordered, no retransmissions</option>
                <option value='{"ordered": false, "maxPacketLifetime": 500}'>Unordered, 500ms lifetime</option>
            </select>
        </div>
        <div class="option">
            <input id="use-audio" checked="checked" type="checkbox"/>
            <label for="use-audio">Use audio</label>
            <select id="audio-codec">
                <option value="default" selected>Default codecs</option>
                <option value="opus/48000/2">Opus</option>
                <option value="PCMU/8000">PCMU</option>
                <option value="PCMA/8000">PCMA</option>
            </select>
        </div>
        <div class="option">
            <input id="use-video" checked="checked" type="checkbox"/>
            <label for="use-video">Use video</label>
            <select id="video-resolution">
                <option value="">Default resolution</option>
                <option value="320x240" selected>320x240</option>
                <option value="640x480">640x480</option>
                <option value="960x540">960x540</option>
                <option value="1280x720">1280x720</option>
            </select>
            <select id="video-transform">
                <option value="none">No transform</option>
                <option value="edges">Edge detection</option>
                <option value="cartoon" selected>Cartoon effect</option>
                <option value="rotate">Rotate</option>
            </select>
            <select id="video-codec">
                <option value="default" selected>Default codecs</option>
                <option value="VP8/90000">VP8</option>
                <option value="h364/90000">h364</option>
            </select>
        </div>
        <div class="option">
            <input id="use-stun" checked="checked" type="checkbox"/>
            <label for="use-stun">Use STUN server</label>
        </div>

        <hr>
        <h3>State</h3>
        <p>
            ICE gathering state: <span id="ice-gathering-state"></span>
        </p>
        <p>
            ICE connection state: <span id="ice-connection-state"></span>
        </p>
        <p>
            Signaling state: <span id="signaling-state"></span>
        </p>

        <div id="media" style="display: none">
            <hr>
            <h3>Video</h3>
            <video id="video" autoplay="true" playsinline="true"></video>

            <h3>Audio</h3>
            <p>Scott Holmes - Upbeat Party</p>
            <audio id="audio" autoplay="true"></audio>
        </div>

        <hr>
        <h3>Data channel</h3>
        <pre id="data-channel" style="height: 200px;"></pre>

        <hr>
        <h3>SDP</h3>

        <hr>
        <h3>Offer</h3>
        <pre id="offer-sdp"></pre>

        <hr>
        <h3>Answer</h3>
        <pre id="answer-sdp"></pre>

    </div>
<script src={% static "experiments/streaming.js" %}></script>
</body>
</html>
